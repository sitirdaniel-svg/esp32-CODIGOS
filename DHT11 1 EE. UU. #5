importar máquina
desde tiempo importar suspensión
importar dht
importar red
importar solicitudes

Configura el pin del sensor DHT11
dht_pin = machine.Pin(4)

Configure la conexión Wi-Fi
SSID = "TONYLECHE"
CONTRASEÑA = "87654321011902"

def connect_wifi():
estación = red.WLAN(red.STA_IF)

if not station.isconnected():
print("Conectando a Wi-Fi...")
station.active(True)
station.connect(SSID, PASSWORD)
while not station.isconnected():
pass
print("Conexión Wi-Fi establecida")
print(station.ifconfig())
def read_sensor_data():
sensor = dht.DHT11(dht_pin)
sensor.measure()
temperature = sensor.temperature()
humidity = sensor.humidity()
return temperature, humidity

def send_data_to_thingspeak(api_key, temperature, humidity):
url = " https://api.thingspeak.com/update.json "
params = "?api_key={}&field1={}&field2={}".format(api_key, temperature, humidity)
response = urequests.get(url + params)
print("Respuesta de ThingSpeak:", response.text)

def main():
connect_wifi()
while True:
temperatura, humedad = read_sensor_data()
print("Temperatura: {:.1f}°C".format(temperatura))
print("Humedad: {:.1f}%".format(humedad))
send_data_to_thingspeak("EYLB3MNDJTOLDW4O", temperatura, humedad)
sleep(5)

si nombre == 'main':
main()
